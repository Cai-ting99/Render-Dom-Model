{"version":3,"sources":["webpack://RDM/./RDM/DomBuilder.ts","webpack://RDM/./RDM/PublicLib.ts","webpack://RDM/./RDM/RDM.ts","webpack://RDM/./main.ts","webpack://RDM/./test/test.ts","webpack://RDM/webpack/bootstrap","webpack://RDM/webpack/startup"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineProperty","exports","value","PublicLib_1","require","RDM_1","DomBuilder","_DomModels","_Module","HtmlElementKey","AttrModel","ParentDom","DomModels","Item","ModelProp","Module","Dom","IsLoad","Index","ForLocation","Action","ContinueTorender","ChildDom","ContinuetoCycle","ChildDomArr","RDMProp","setLoadState","_isLoad","setHtmlModelProp","_Props","setHtmlElementKey","_key","setAttrModel","Attrs","setForItem","_item","setForIndex","_index","setParentDom","PDom","setContinuetoCycle","_Continue","setForLocation","_location","DiffAttrModel","HtmlModel","Rander","NewAttrModel","GetValueByPropStr","join","key","Array","isArray","AnalysisSpecificAttr","toString","OldAttrModel","undefined","DecorateDomAttr","RanderIf","NewDom","document","createComment","parentElement","replaceChild","createElement","replace","RanderFunc","_self_1","func","e","addEventListener","RanderBind","_this","model","EventType","nodeName","handler","Prop","removeEventListener","Attrkey","_AttrModel","PropModel","match","ForItemas","OldAttrStr","substring","BindFuncArr","_loop_1","IsTagModel","this_1","concat","builder","style","display","setAttribute","TextDom","from","childNodes","find","m","textContent","appendChild","createTextNode","push","Reconsitution","_a","_b","IsForTagModel","Error","DomForTempLateLen_1","$DomForTempLate","arr","len","action","Type","name","args","reverse","removeChild","pop","shift","children","insertBefore","default","Bind","obj","PropStr","OutParam","split","forEach","idx","BindStr","PorpStr","DomBuilder_1","RDM","$DomModels","$Document","createDocumentFragment","LazyUpdate","LaterUpadte","$Module","RanderHTMLModel","setTimeout","Monitor","RewritingArrayFunc","body","AopFunc","Func","_self","i_1","clearTimeout","FuncName","Model","TempValue","get","set","v","HTMLModel","test_1","default_1","data","data2","Math","random","color","selectVal","EditIndex","dataName","age","input","if","type","div","title","select","option","f","itemas","button","click","unshift","div1","a","_m","__webpack_module_cache__","__webpack_require__","moduleId","module","__webpack_modules__"],"mappings":"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","file":"main-bundle.js","sourcesContent":["\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar PublicLib_1 = require(\"./PublicLib\");\r\nvar RDM_1 = require(\"./RDM\");\r\nvar DomBuilder = /** @class */ (function () {\r\n    function DomBuilder(_DomModels, _Module) {\r\n        this.HtmlElementKey = \"\";\r\n        this.AttrModel = null;\r\n        this.ParentDom = null;\r\n        this.DomModels = [];\r\n        this.Item = null;\r\n        this.ModelProp = [];\r\n        this.Module = null;\r\n        this.Dom = null;\r\n        this.IsLoad = false;\r\n        this.Index = 0;\r\n        this.ForLocation = { Action: \"\" };\r\n        this.ContinueTorender = true;\r\n        this.ChildDom = {};\r\n        this.ContinuetoCycle = true;\r\n        this.ChildDomArr = [];\r\n        this.DomModels = _DomModels;\r\n        this.Module = _Module;\r\n        this.ChildDomArr.RDMProp = true;\r\n    }\r\n    DomBuilder.prototype.setLoadState = function (_isLoad) {\r\n        this.IsLoad = _isLoad;\r\n        return this;\r\n    };\r\n    DomBuilder.prototype.setHtmlModelProp = function (_Props) {\r\n        this.ModelProp = _Props;\r\n        return this;\r\n    };\r\n    DomBuilder.prototype.setHtmlElementKey = function (_key) {\r\n        this.HtmlElementKey = _key;\r\n        return this;\r\n    };\r\n    DomBuilder.prototype.setAttrModel = function (Attrs) {\r\n        this.AttrModel = Attrs;\r\n        return this;\r\n    };\r\n    DomBuilder.prototype.setForItem = function (_item) {\r\n        this.Item = _item;\r\n        return this;\r\n    };\r\n    DomBuilder.prototype.setForIndex = function (_index) {\r\n        this.Index = _index;\r\n        return this;\r\n    };\r\n    DomBuilder.prototype.setParentDom = function (PDom) {\r\n        this.ParentDom = PDom;\r\n        return this;\r\n    };\r\n    DomBuilder.prototype.setContinuetoCycle = function (_Continue) {\r\n        this.ContinuetoCycle = _Continue;\r\n        return this;\r\n    };\r\n    DomBuilder.prototype.setForLocation = function (_location) {\r\n        this.ForLocation = _location;\r\n        return this;\r\n    };\r\n    DomBuilder.prototype.DiffAttrModel = function () {\r\n        var HtmlModel = this.Module.Rander();\r\n        var NewAttrModel = PublicLib_1.GetValueByPropStr(this.ModelProp.join(\".\"), HtmlModel);\r\n        var DiffAttrModel = {};\r\n        for (var key in this.AttrModel) {\r\n            if (Array.isArray(NewAttrModel[key]) ||\r\n                typeof NewAttrModel[key] === \"function\")\r\n                continue;\r\n            this.AnalysisSpecificAttr(key, NewAttrModel);\r\n            if (NewAttrModel[key].hasOwnProperty(\"Prop\")) {\r\n                if (NewAttrModel[key][\"BindStr\"] !== this.AttrModel[key][\"BindStr\"] ||\r\n                    NewAttrModel[key][\"model\"] !== this.AttrModel[key][\"model\"] ||\r\n                    this.Dom[key] !== NewAttrModel[key][\"model\"]) {\r\n                    DiffAttrModel[key] = NewAttrModel[key];\r\n                    this.AttrModel[key] = NewAttrModel[key];\r\n                }\r\n            }\r\n            else {\r\n                if (NewAttrModel[key].toString() !== this.AttrModel[key].toString()) {\r\n                    DiffAttrModel[key] = NewAttrModel[key];\r\n                    this.AttrModel[key] = NewAttrModel[key];\r\n                }\r\n            }\r\n        }\r\n        var OldAttrModel = this.AttrModel;\r\n        if (DiffAttrModel[\"if\"] !== undefined) {\r\n            DiffAttrModel = __assign(__assign({}, this.AttrModel), DiffAttrModel);\r\n        }\r\n        this.setAttrModel(DiffAttrModel);\r\n        this.DecorateDomAttr();\r\n        this.setAttrModel(OldAttrModel);\r\n    };\r\n    DomBuilder.prototype.RanderIf = function () {\r\n        var NewDom;\r\n        if (this.AttrModel[\"if\"].toString() === \"false\") {\r\n            NewDom = document.createComment(\"\");\r\n            if (this.IsLoad) {\r\n                this.Dom.parentElement.replaceChild(NewDom, this.Dom);\r\n            }\r\n            else {\r\n                this.Dom = NewDom;\r\n            }\r\n            this.ContinueTorender = false;\r\n        }\r\n        else {\r\n            NewDom = document.createElement(this.HtmlElementKey.replace(/_/g, \"\").replace(/[0-9]/g, \"\"));\r\n            if (this.IsLoad) {\r\n                this.Dom.parentElement.replaceChild(NewDom, this.Dom);\r\n            }\r\n            else {\r\n                this.Dom = NewDom;\r\n            }\r\n            this.ContinueTorender = true;\r\n        }\r\n        this.Dom = NewDom;\r\n    };\r\n    DomBuilder.prototype.RanderFunc = function (key) {\r\n        if (this.Item) {\r\n            var _self_1 = this;\r\n            this.AttrModel[key] = (function (func) {\r\n                return function (e) {\r\n                    func.apply(this, [\r\n                        _self_1.Item[_self_1.AttrModel[\"itemas\"]],\r\n                        _self_1.Index,\r\n                        e,\r\n                    ]);\r\n                };\r\n            })(this.AttrModel[key]);\r\n        }\r\n        this.Dom.addEventListener(key, this.AttrModel[key]);\r\n    };\r\n    DomBuilder.prototype.RanderBind = function (key) {\r\n        var _this = this;\r\n        if (this.Dom[key] !== this.AttrModel[key].model)\r\n            this.Dom[key] = this.AttrModel[key].model;\r\n        var EventType = \"input\";\r\n        if (this.Dom.nodeName === \"SELECT\") {\r\n            EventType = \"change\";\r\n        }\r\n        var handler = function () {\r\n            _this.AttrModel[key].Prop.Item[_this.AttrModel[key].Prop.key] = _this\r\n                .Dom.value;\r\n        };\r\n        this.Dom.removeEventListener(EventType, handler);\r\n        this.Dom.addEventListener(EventType, handler);\r\n    };\r\n    DomBuilder.prototype.AnalysisSpecificAttr = function (Attrkey, _AttrModel) {\r\n        if (_AttrModel[\"if\"] !== undefined) {\r\n            if (_AttrModel[\"if\"].toString() === \"false\") {\r\n                return;\r\n            }\r\n        }\r\n        if (_AttrModel[Attrkey].hasOwnProperty(\"Bind\")) {\r\n            var PropModel = this.Module;\r\n            if (_AttrModel[Attrkey][\"Bind\"].match(/\\<.*?\\>/gi)) {\r\n                PropModel = this.Item;\r\n            }\r\n            _AttrModel[Attrkey] = PublicLib_1.GetValueByPropStr(_AttrModel[Attrkey][\"Bind\"], PropModel, true);\r\n        }\r\n        if (typeof _AttrModel[Attrkey] === \"string\") {\r\n            var ForItemas = _AttrModel[Attrkey].match(/\\<.*?\\>/gi);\r\n            if (ForItemas) {\r\n                this.OldAttrStr = _AttrModel[Attrkey];\r\n                for (var i = 0; i < ForItemas.length; i++) {\r\n                    _AttrModel[Attrkey] = _AttrModel[Attrkey].replace(ForItemas[i], PublicLib_1.GetValueByPropStr(ForItemas[i].substring(1, ForItemas[i].length - 1), this.Item));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    DomBuilder.prototype.DecorateDomAttr = function () {\r\n        var _this = this;\r\n        var BindFuncArr = [];\r\n        BindFuncArr.RDMProp = true;\r\n        var _loop_1 = function (key) {\r\n            if (PublicLib_1.IsTagModel(this_1.AttrModel[key]) &&\r\n                !this_1.ChildDom.hasOwnProperty(key)) {\r\n                this_1.ChildDom[key] = new DomBuilder(this_1.DomModels, this_1.Module)\r\n                    .setHtmlModelProp(this_1.ModelProp.concat(key))\r\n                    .setHtmlElementKey(key)\r\n                    .setAttrModel(__assign({}, this_1.AttrModel[key]))\r\n                    .setForItem(this_1.Item)\r\n                    .setParentDom(this_1.Dom)\r\n                    .builder();\r\n                return \"continue\";\r\n            }\r\n            else if (this_1.ChildDom.hasOwnProperty(key)) {\r\n                if (Array.isArray(this_1.ChildDom[key])) {\r\n                    for (var i = 0; i < this_1.ChildDom.length; i++) {\r\n                        this_1.ChildDom[i]\r\n                            .setForItem(this_1.Item)\r\n                            .setLoadState(true)\r\n                            .builder(true);\r\n                    }\r\n                }\r\n                else {\r\n                    this_1.ChildDom[key]\r\n                        .setForItem(this_1.Item)\r\n                        .setLoadState(true)\r\n                        .builder(true);\r\n                }\r\n                return \"continue\";\r\n            }\r\n            if (!Array.isArray(this_1.AttrModel[key]) && key !== \"itemas\") {\r\n                this_1.AnalysisSpecificAttr(key, this_1.AttrModel);\r\n                if (key === \"if\") {\r\n                    this_1.RanderIf();\r\n                }\r\n                if (!this_1.ContinueTorender) {\r\n                    return \"continue\";\r\n                }\r\n                switch (key) {\r\n                    case \"show\":\r\n                        this_1.Dom.style.display =\r\n                            this_1.AttrModel[key].toString() === \"false\" ? \"none\" : \"\";\r\n                        break;\r\n                    case \"style\":\r\n                        this_1.Dom.setAttribute(\"style\", this_1.AttrModel[key]);\r\n                        break;\r\n                    case \"title\":\r\n                        var TextDom = Array.from(this_1.Dom.childNodes).find(function (m) { return m.nodeName === \"#text\"; });\r\n                        if (TextDom) {\r\n                            TextDom.textContent = this_1.AttrModel[key];\r\n                        }\r\n                        else {\r\n                            this_1.Dom.appendChild(document.createTextNode(this_1.AttrModel[key]));\r\n                        }\r\n                        break;\r\n                    default:\r\n                        if (typeof this_1.AttrModel[key] === \"function\" && !this_1.IsLoad) {\r\n                            this_1.RanderFunc(key);\r\n                        }\r\n                        else {\r\n                            if (this_1.AttrModel[key].hasOwnProperty(\"Prop\")) {\r\n                                BindFuncArr.push(function () {\r\n                                    _this.RanderBind(key);\r\n                                });\r\n                            }\r\n                            else {\r\n                                if (key !== \"if\" && key !== \"f\")\r\n                                    this_1.Dom[key] = this_1.AttrModel[key];\r\n                            }\r\n                        }\r\n                        break;\r\n                }\r\n                if (this_1.OldAttrStr) {\r\n                    this_1.AttrModel[key] = this_1.OldAttrStr;\r\n                    this_1.OldAttrStr = null;\r\n                }\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        for (var key in this.AttrModel) {\r\n            _loop_1(key);\r\n        }\r\n        for (var i = 0; i < BindFuncArr.length; i++) {\r\n            BindFuncArr[i]();\r\n        }\r\n    };\r\n    DomBuilder.prototype.builder = function (Reconsitution) {\r\n        var _a, _b;\r\n        var _this = this;\r\n        if (Reconsitution === void 0) { Reconsitution = false; }\r\n        var res = PublicLib_1.IsForTagModel(this.AttrModel);\r\n        if (res && this.ContinuetoCycle) {\r\n            if (!this.AttrModel[\"itemas\"]) {\r\n                throw new Error(\"在 \" + this.ModelProp.join(\".\") + \" 下未找到相应的 itemas 的别名\");\r\n            }\r\n            var DomForTempLateLen_1 = RDM_1.default.$DomForTempLate.length;\r\n            RDM_1.default.$DomForTempLate.push({\r\n                key: this.ModelProp.join(\".\"),\r\n                AttrModel: this.AttrModel,\r\n                arr: this.AttrModel[\"f\"],\r\n                len: this.AttrModel[\"f\"].length,\r\n                action: function (Type) {\r\n                    var _a, _b;\r\n                    switch (Type.name) {\r\n                        case \"unshift\":\r\n                        case \"push\":\r\n                            if (Type.name === \"unshift\") {\r\n                                Type.args = Array.from(Type.args);\r\n                                Type.args.RDMProp = true;\r\n                                Type.args.reverse();\r\n                                delete Type.args.RDMProp;\r\n                            }\r\n                            for (var i = 0; i < Type.args.length; i++) {\r\n                                _this.ChildDomArr[Type.name](new DomBuilder(_this.DomModels, _this.Module)\r\n                                    .setHtmlModelProp(_this.ModelProp)\r\n                                    .setHtmlElementKey(_this.HtmlElementKey)\r\n                                    .setAttrModel(__assign({}, _this.AttrModel))\r\n                                    .setContinuetoCycle(false)\r\n                                    .setForItem(_this.Item\r\n                                    ? __assign(__assign({}, _this.Item), (_a = {}, _a[_this.AttrModel[\"itemas\"]] = Type.args[i], _a)) : (_b = {},\r\n                                    _b[_this.AttrModel[\"itemas\"]] = Type.args[i],\r\n                                    _b))\r\n                                    .setForIndex(_this.AttrModel[\"f\"].length - (Type.args.length - i))\r\n                                    .setForLocation({ Action: Type.name })\r\n                                    .setParentDom(_this.ParentDom)\r\n                                    .builder());\r\n                            }\r\n                            break;\r\n                        case \"pop\":\r\n                            if (_this.ChildDomArr.length !== 0) {\r\n                                _this.ChildDomArr[_this.ChildDomArr.length - 1].Dom.parentElement.removeChild(_this.ChildDomArr[_this.ChildDomArr.length - 1].Dom);\r\n                                _this.ChildDomArr.pop();\r\n                            }\r\n                            break;\r\n                        case \"shift\":\r\n                            if (_this.ChildDomArr.length !== 0) {\r\n                                _this.ChildDomArr[0].Dom.parentElement.removeChild(_this.ChildDomArr[0].Dom);\r\n                                _this.ChildDomArr.shift();\r\n                            }\r\n                            break;\r\n                        case \"reverse\":\r\n                        case \"sort\":\r\n                            for (var i = 0; i < _this.ChildDomArr.length; i++) {\r\n                                _this.ChildDomArr[i].Item[_this.AttrModel[\"itemas\"]] = _this.AttrModel[\"f\"][i];\r\n                                _this.ChildDomArr[i].setLoadState(true).builder(true);\r\n                            }\r\n                            break;\r\n                    }\r\n                    if (_this.ParentDom.nodeName === \"SELECT\") {\r\n                        _this.ParentDom.value = \"\";\r\n                    }\r\n                    for (var i = 0; i < _this.ChildDomArr.length; i++) {\r\n                        _this.ChildDomArr[i].Index = i;\r\n                    }\r\n                    RDM_1.default.$DomForTempLate[DomForTempLateLen_1].len = _this.AttrModel[\"f\"].length;\r\n                },\r\n            });\r\n            for (var i = 0; i < this.AttrModel[\"f\"].length; i++) {\r\n                this.ChildDomArr.push(new DomBuilder(this.DomModels, this.Module)\r\n                    .setHtmlModelProp(this.ModelProp)\r\n                    .setHtmlElementKey(this.HtmlElementKey)\r\n                    .setAttrModel(__assign({}, this.AttrModel))\r\n                    .setContinuetoCycle(false)\r\n                    .setForItem(this.Item\r\n                    ? __assign(__assign({}, this.Item), (_a = {}, _a[this.AttrModel[\"itemas\"]] = this.AttrModel[\"f\"][i], _a)) : (_b = {},\r\n                    _b[this.AttrModel[\"itemas\"]] = this.AttrModel[\"f\"][i],\r\n                    _b))\r\n                    .setForIndex(i)\r\n                    .setParentDom(this.ParentDom)\r\n                    .builder());\r\n            }\r\n            return this.ChildDomArr;\r\n        }\r\n        if (!Reconsitution) {\r\n            this.Dom = document.createElement(this.HtmlElementKey.replace(/_/g, \"\").replace(/[0-9]/g, \"\"));\r\n        }\r\n        this.DecorateDomAttr();\r\n        if (this.ParentDom.nodeName !== \"#comment\" && !Reconsitution) {\r\n            switch (this.ForLocation.Action) {\r\n                case \"unshift\":\r\n                    if (this.ParentDom.children.length === 0) {\r\n                        this.ParentDom.appendChild(this.Dom);\r\n                    }\r\n                    else {\r\n                        this.ParentDom.insertBefore(this.Dom, this.ParentDom.children[0]);\r\n                    }\r\n                    break;\r\n                case \"push\":\r\n                default:\r\n                    this.ParentDom.appendChild(this.Dom);\r\n                    break;\r\n            }\r\n            this.ForLocation.Action = \"\";\r\n        }\r\n        if (!Reconsitution)\r\n            this.DomModels.push(this);\r\n        return this;\r\n    };\r\n    return DomBuilder;\r\n}());\r\nexports.default = DomBuilder;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Bind = exports.GetValueByPropStr = exports.IsForTagModel = exports.IsTagModel = void 0;\r\n/**\r\n * 是否是标签模型\r\n * @param obj 要验证的对象\r\n */\r\nfunction IsTagModel(obj) {\r\n    return (typeof obj === \"object\" &&\r\n        !obj.hasOwnProperty(\"Bind\") &&\r\n        !obj.hasOwnProperty(\"Prop\") &&\r\n        !Array.isArray(obj));\r\n}\r\nexports.IsTagModel = IsTagModel;\r\n/**\r\n * 是否是循环的Dom节点\r\n */\r\nfunction IsForTagModel(obj) {\r\n    if (obj[\"f\"])\r\n        return true;\r\n    return false;\r\n}\r\nexports.IsForTagModel = IsForTagModel;\r\n/**\r\n * 通过属性字符串获取值\r\n * @param PropStr 值位置字符串 例：div.a.p\r\n * @param model 原型对象\r\n */\r\nfunction GetValueByPropStr(PropStr, model, OutParam) {\r\n    if (OutParam === void 0) { OutParam = false; }\r\n    if (PropStr.match(/\\<.*?\\>/gi)) {\r\n        PropStr = PropStr.substring(1, PropStr.length - 1);\r\n    }\r\n    var Prop = { key: \"\", Item: null };\r\n    PropStr.split(\".\").forEach(function (s) {\r\n        var idx = s.match(/\\[[0-9]+\\]/gi);\r\n        if (idx) {\r\n            idx[0] = idx[0].substring(1, idx[0].length - 1);\r\n            model = model[s.replace(\"[\" + idx[0] + \"]\", \"\")];\r\n            model = model[idx[0]];\r\n            Prop.Item = model;\r\n            Prop.key = s.replace(\"[\" + idx[0] + \"]\", \"\");\r\n            return;\r\n        }\r\n        Prop.key = s;\r\n        Prop.Item = model;\r\n        model = model[s];\r\n    });\r\n    if (OutParam) {\r\n        return { model: model, Prop: Prop, BindStr: PropStr };\r\n    }\r\n    return model;\r\n}\r\nexports.GetValueByPropStr = GetValueByPropStr;\r\n/**\r\n * 双向绑定\r\n * @param PorpStr prop位置字符串\r\n */\r\nfunction Bind(PorpStr) {\r\n    return { Bind: PorpStr };\r\n}\r\nexports.Bind = Bind;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar DomBuilder_1 = require(\"./DomBuilder\");\r\nvar RDM = /** @class */ (function () {\r\n    /**\r\n     * RDM构造函数\r\n     * @param Module 模块类\r\n     */\r\n    function RDM(Module) {\r\n        var _this = this;\r\n        /**Dom对象实体的集合 */\r\n        this.$DomModels = [];\r\n        /**根节点碎片 */\r\n        this.$Document = document.createDocumentFragment();\r\n        this.LazyUpdate = 0;\r\n        this.LaterUpadte = 0;\r\n        this.$Module = new Module();\r\n        this.RanderHTMLModel(this.$Module.Rander(), this.$Document);\r\n        setTimeout(function () {\r\n            _this.Monitor(_this.$Module);\r\n            _this.RewritingArrayFunc();\r\n        }, 0);\r\n        document.body.appendChild(this.$Document);\r\n    }\r\n    RDM.prototype.AopFunc = function (Func) {\r\n        var _self = this;\r\n        return function () {\r\n            Func.apply(this, arguments);\r\n            if (this.RDMProp)\r\n                return;\r\n            if (Func.name === \"reverse\" || Func.name === \"sort\")\r\n                this[\"$__\" + Func.name] = true;\r\n            for (var i = 0; i < RDM.$DomForTempLate.length; i++) {\r\n                if (RDM.$DomForTempLate[i].arr.length !== RDM.$DomForTempLate[i].len ||\r\n                    RDM.$DomForTempLate[i].arr[\"$__\" + Func.name]) {\r\n                    for (var i_1 = 0; i_1 < arguments.length; i_1++) {\r\n                        if (typeof arguments[i_1] === \"object\") {\r\n                            _self.Monitor(arguments[i_1]);\r\n                        }\r\n                    }\r\n                    RDM.$DomForTempLate[i].action({ name: Func.name, args: arguments });\r\n                }\r\n            }\r\n            if (Func.name === \"reverse\" || Func.name === \"sort\")\r\n                delete this[\"$__\" + Func.name];\r\n            if (_self.LazyUpdate) {\r\n                clearTimeout(_self.LazyUpdate);\r\n            }\r\n            _self.LazyUpdate = setTimeout(function () {\r\n                for (var i = 0; i < _self.$DomModels.length; i++) {\r\n                    _self.$DomModels[i].setLoadState(true).DiffAttrModel();\r\n                }\r\n            }, 1);\r\n        };\r\n    };\r\n    RDM.prototype.RewritingArrayFunc = function () {\r\n        this.$DomModels.RDMProp = true;\r\n        var FuncName = [\"push\", \"pop\", \"shift\", \"unshift\", \"sort\", \"reverse\"];\r\n        for (var i = 0; i < FuncName.length; i++) {\r\n            Array.prototype[FuncName[i]] = this.AopFunc(Array.prototype[FuncName[i]]);\r\n        }\r\n    };\r\n    RDM.prototype.Monitor = function (Model) {\r\n        var _this = this;\r\n        if (Array.isArray(Model)) {\r\n            for (var i = 0; i < Model.length; i++) {\r\n                this.Monitor(Model[i]);\r\n            }\r\n            return;\r\n        }\r\n        var _loop_1 = function (key) {\r\n            var TempValue = Model[key];\r\n            Object.defineProperty(Model, key, {\r\n                get: function () {\r\n                    return TempValue;\r\n                },\r\n                set: function (v) {\r\n                    TempValue = v;\r\n                    if (_this.LaterUpadte) {\r\n                        clearTimeout(_this.LaterUpadte);\r\n                    }\r\n                    _this.LaterUpadte = setTimeout(function () {\r\n                        for (var i = 0; i < _this.$DomModels.length; i++) {\r\n                            _this.$DomModels[i].setLoadState(true).DiffAttrModel();\r\n                        }\r\n                    }, 1);\r\n                },\r\n            });\r\n            if (typeof Model[key] === \"object\") {\r\n                this_1.Monitor(Model[key]);\r\n            }\r\n        };\r\n        var this_1 = this;\r\n        for (var key in Model) {\r\n            _loop_1(key);\r\n        }\r\n    };\r\n    RDM.prototype.RanderHTMLModel = function (HTMLModel, ParentDom) {\r\n        for (var key in HTMLModel) {\r\n            new DomBuilder_1.default(this.$DomModels, this.$Module)\r\n                .setHtmlModelProp([key])\r\n                .setHtmlElementKey(key)\r\n                .setAttrModel(HTMLModel[key])\r\n                .setParentDom(ParentDom)\r\n                .builder();\r\n        }\r\n    };\r\n    RDM.$DomForTempLate = [];\r\n    return RDM;\r\n}());\r\nexports.default = RDM;\r\nRDM.$DomForTempLate.RDMProp = true;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// require(\"babel-polyfill\"); // 兼容IE\r\nvar RDM_1 = require(\"./RDM/RDM\");\r\nvar test_1 = require(\"./test/test\");\r\nnew RDM_1.default(test_1.default);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar PublicLib_1 = require(\"../RDM/PublicLib\");\r\nvar default_1 = /** @class */ (function () {\r\n    function default_1() {\r\n        this.name = \"原文本\";\r\n        this.data = [];\r\n        this.data2 = [\r\n            { name: Math.random().toString(), value: \"a\" },\r\n            { name: Math.random().toString(), value: \"b\" },\r\n            { name: Math.random().toString(), value: \"c\" },\r\n        ];\r\n        this.color = \"red\";\r\n        this.selectVal = \"张三\";\r\n        this.EditIndex = 0;\r\n        for (var i = 0; i < 1000; i++) {\r\n            var dataName = Math.random().toString();\r\n            this.data.push({\r\n                name: dataName,\r\n                age: 18,\r\n            });\r\n        }\r\n        this.data2[0].name = \"前缀\";\r\n    }\r\n    default_1.prototype.Rander = function () {\r\n        var _this = this;\r\n        return {\r\n            input: {\r\n                if: this.data2.length !== 0,\r\n                type: \"text\",\r\n                value: PublicLib_1.Bind(\"data2[\" + this.EditIndex + \"].name\"),\r\n            },\r\n            div: {\r\n                title: \"select\\u9009\\u4E2D\\u7684\\u503C\\uFF1A\" + this.selectVal,\r\n            },\r\n            select: {\r\n                value: PublicLib_1.Bind(\"selectVal\"),\r\n                option: {\r\n                    f: this.data2,\r\n                    itemas: \"m\",\r\n                    title: \"<m.name>\",\r\n                    value: \"<m.value>\",\r\n                },\r\n            },\r\n            button: {\r\n                title: \"test\",\r\n                click: function () {\r\n                    var _a;\r\n                    (_a = _this.data).unshift.apply(_a, [\r\n                        {\r\n                            name: \"我是unshift的\" + Math.random(),\r\n                            age: 18,\r\n                        },\r\n                        {\r\n                            name: \"我是unshift的\" + Math.random(),\r\n                            age: 18,\r\n                        },\r\n                    ]);\r\n                },\r\n            },\r\n            div1: {\r\n                style: \"color:\" + this.color,\r\n                title: \"\\u70B9\\u6211\\u8FFD\\u52A0Dom\",\r\n                click: function () {\r\n                    // for (let i = 0; i < 1; i++) {\r\n                    //   this.data2.push({\r\n                    //     name: \"我是追加的\" + Math.random(),\r\n                    //     value: \"\",\r\n                    //   });\r\n                    // }\r\n                    // this.data2.pop();\r\n                    _this.data2.push({\r\n                        name: \"我是追加的\" + Math.random(),\r\n                        value: Math.random().toString(),\r\n                    });\r\n                },\r\n            },\r\n            a: {\r\n                title: this.name,\r\n                div: {\r\n                    f: this.data,\r\n                    itemas: \"m\",\r\n                    title: this.data2[0].name + \"：<m.name> 年龄：<m.age>\",\r\n                    input: {\r\n                        value: PublicLib_1.Bind(\"<m.name>\"),\r\n                    },\r\n                    click: function () {\r\n                        _this.data.reverse();\r\n                        // this.data.sort((a, b) => parseFloat(a.name) - parseFloat(b.name));\r\n                        // this.data2.sort((a, b) => parseFloat(a.name) - parseFloat(b.name));\r\n                    },\r\n                    div: {\r\n                        title: \"<m1.name>\",\r\n                        f: this.data2,\r\n                        itemas: \"m1\",\r\n                        click: function (_m, i) {\r\n                            _this.EditIndex = i;\r\n                        },\r\n                    },\r\n                },\r\n            },\r\n        };\r\n    };\r\n    return default_1;\r\n}());\r\nexports.default = default_1;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module\n__webpack_require__(358);\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}